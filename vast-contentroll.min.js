/**
 * IntersectionObserver polyfill
 * @link https://github.com/w3c/IntersectionObserver/tree/gh-pages/polyfill
 *
 * Copyright 2016 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(h,g){function m(a){this.time=a.time;this.target=a.target;this.rootBounds=a.rootBounds;this.boundingClientRect=a.boundingClientRect;this.intersectionRect=a.intersectionRect||l();this.isIntersecting=!!a.intersectionRect;a=this.boundingClientRect;a=a.width*a.height;var b=this.intersectionRect;b=b.width*b.height;this.intersectionRatio=a?b/a:this.isIntersecting?1:0}function d(a,b){var c=b||{};if("function"!=typeof a)throw Error("callback must be a function");if(c.root&&1!=c.root.nodeType)throw Error("root must be an Element");
    this._checkForIntersections=u(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=a;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(c.rootMargin);this.thresholds=this._initThresholds(c.threshold);this.root=c.root||null;this.rootMargin=this._rootMarginValues.map(function(a){return a.value+a.unit}).join(" ")}function u(a,b){var c=null;return function(){c||(c=setTimeout(function(){a();c=null},b))}}function n(a,b,c,e){"function"==
typeof a.addEventListener?a.addEventListener(b,c,e||!1):"function"==typeof a.attachEvent&&a.attachEvent("on"+b,c)}function r(a,b,c,e){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,e||!1):"function"==typeof a.detatchEvent&&a.detatchEvent("on"+b,c)}function p(a){try{var b=a.getBoundingClientRect()}catch(c){}if(!b)return l();b.width&&b.height||(b={top:b.top,right:b.right,bottom:b.bottom,left:b.left,width:b.right-b.left,height:b.bottom-b.top});return b}function l(){return{top:0,bottom:0,
    left:0,right:0,width:0,height:0}}function t(a,b){for(var c=b;c;){if(c==a)return!0;c=q(c)}return!1}function q(a){return(a=a.parentNode)&&11==a.nodeType&&a.host?a.host:a}if("IntersectionObserver"in h&&"IntersectionObserverEntry"in h&&"intersectionRatio"in h.IntersectionObserverEntry.prototype)"isIntersecting"in h.IntersectionObserverEntry.prototype||Object.defineProperty(h.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});else{var k=[];d.prototype.THROTTLE_TIMEOUT=
    100;d.prototype.POLL_INTERVAL=null;d.prototype.observe=function(a){if(!this._observationTargets.some(function(b){return b.element==a})){if(!a||1!=a.nodeType)throw Error("target must be an Element");this._registerInstance();this._observationTargets.push({element:a,entry:null});this._monitorIntersections();this._checkForIntersections()}};d.prototype.unobserve=function(a){this._observationTargets=this._observationTargets.filter(function(b){return b.element!=a});this._observationTargets.length||(this._unmonitorIntersections(),
    this._unregisterInstance())};d.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorIntersections();this._unregisterInstance()};d.prototype.takeRecords=function(){var a=this._queuedEntries.slice();this._queuedEntries=[];return a};d.prototype._initThresholds=function(a){a=a||[0];Array.isArray(a)||(a=[a]);return a.sort().filter(function(a,c,e){if("number"!=typeof a||isNaN(a)||0>a||1<a)throw Error("threshold must be a number between 0 and 1 inclusively");return a!==e[c-1]})};d.prototype._parseRootMargin=
    function(a){a=(a||"0px").split(/\s+/).map(function(a){a=/^(-?\d*\.?\d+)(px|%)$/.exec(a);if(!a)throw Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(a[1]),unit:a[2]}});a[1]=a[1]||a[0];a[2]=a[2]||a[0];a[3]=a[3]||a[1];return a};d.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(n(h,"resize",this._checkForIntersections,
    !0),n(g,"scroll",this._checkForIntersections,!0),"MutationObserver"in h&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(g,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))};d.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,r(h,"resize",this._checkForIntersections,!0),r(g,"scroll",this._checkForIntersections,!0),
this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))};d.prototype._checkForIntersections=function(){var a=this._rootIsInDom(),b=a?this._getRootRect():l();this._observationTargets.forEach(function(c){var e=c.element,d=p(e),f=this._rootContainsTarget(e),g=c.entry,k=a&&f&&this._computeTargetAndRootIntersection(e,b);c=c.entry=new m({time:h.performance&&performance.now&&performance.now(),target:e,boundingClientRect:d,rootBounds:b,intersectionRect:k});g?a&&f?this._hasCrossedThreshold(g,
    c)&&this._queuedEntries.push(c):g&&g.isIntersecting&&this._queuedEntries.push(c):this._queuedEntries.push(c)},this);this._queuedEntries.length&&this._callback(this.takeRecords(),this)};d.prototype._computeTargetAndRootIntersection=function(a,b){if("none"!=h.getComputedStyle(a).display){for(var c=p(a),e=q(a),d=!1;!d;){var f=null,k=1==e.nodeType?h.getComputedStyle(e):{};if("none"==k.display)return;e==this.root||e==g?(d=!0,f=b):e!=g.body&&e!=g.documentElement&&"visible"!=k.overflow&&(f=p(e));if(f){k=
    Math.max(f.top,c.top);var l=Math.min(f.bottom,c.bottom),m=Math.max(f.left,c.left);c=Math.min(f.right,c.right);f=c-m;var n=l-k;c=0<=f&&0<=n&&{top:k,bottom:l,left:m,right:c,width:f,height:n};if(!c)break}e=q(e)}return c}};d.prototype._getRootRect=function(){if(this.root)var a=p(this.root);else{a=g.documentElement;var b=g.body;a={top:0,left:0,right:a.clientWidth||b.clientWidth,width:a.clientWidth||b.clientWidth,bottom:a.clientHeight||b.clientHeight,height:a.clientHeight||b.clientHeight}}return this._expandRectByRootMargin(a)};
    d.prototype._expandRectByRootMargin=function(a){var b=this._rootMarginValues.map(function(b,e){return"px"==b.unit?b.value:b.value*(e%2?a.width:a.height)/100});b={top:a.top-b[0],right:a.right+b[1],bottom:a.bottom+b[2],left:a.left-b[3]};b.width=b.right-b.left;b.height=b.bottom-b.top;return b};d.prototype._hasCrossedThreshold=function(a,b){var c=a&&a.isIntersecting?a.intersectionRatio||0:-1,e=b.isIntersecting?b.intersectionRatio||0:-1;if(c!==e)for(var d=0;d<this.thresholds.length;d++){var f=this.thresholds[d];
        if(f==c||f==e||f<c!==f<e)return!0}};d.prototype._rootIsInDom=function(){return!this.root||t(g,this.root)};d.prototype._rootContainsTarget=function(a){return t(this.root||g,a)};d.prototype._registerInstance=function(){0>k.indexOf(this)&&k.push(this)};d.prototype._unregisterInstance=function(){var a=k.indexOf(this);-1!=a&&k.splice(a,1)};h.IntersectionObserver=d;h.IntersectionObserverEntry=m}})(window,document);



/*!
 * VAST content-roll
 *
 * @link https://github.com/nechehin/vast-contentroll
 */
(function(){var g=document.createElement("script");g.async=!0;g.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js";g.onload=function(){function f(a,d,b){d="data-"+d;return"undefined"!==typeof b?a.setAttribute(d,b):a.getAttribute(d)}function b(a,d,b){return"undefined"!==typeof b?f(a,d,b?"1":"0"):~["1","true"].indexOf(f(a,d))?!0:!1}function e(a,d){b(a,c.DEBUG)&&console.log("vast-contentroll:",d)}function g(a){b(a,c.CONTROLLS)||(b(a,c.CONTROLLS,1),a.muteButton=document.createElement("a"),a.muteButton.className=
    "vast-contentroll--btn-mute",a.muteButton.textContent=f(a,"mute-text")||"Mute",a.muteButton.style.position="relative",a.muteButton.style.padding="8px 16px",a.muteButton.style.backgroundColor="rgba(0,0,0,0.8)",a.muteButton.style.color="#e6e6e6",a.muteButton.style.fontFamily="arial",a.muteButton.style.fontSize="12px",a.muteButton.style.cursor="pointer",a.muteButton.onclick=function(){0===a.adsManager.getVolume()?(e(a,"unmute clicked"),a.adsManager.setVolume(1),this.textContent=f(a,"mute-text")||"Mute"):
    (a.adsManager.setVolume(0),e(a,"mute clicked"),this.textContent=f(a,"unmute-text")||"Unmute")},a.appendChild(a.muteButton))}function h(a){e(a,"ALL_ADS_COMPLETED");a.muteButton&&a.removeChild(a.muteButton);k.unobserve(a);b(a,c.COMPANION)&&a.companionAds&&a.companionAds.length?(a.innerHTML=a.companionAds[0].getContent(),a.style.height="auto",e(a,"display companion")):b(a,c.COLLAPSE)&&(a.style.height="0",e(a,"ads collapsed"))}var c={INIT:"init",LOADING:"loading",LOADED:"loaded",STARTED:"started",CONTROLLS:"controlls",
    DEBUG:"debug",COLLAPSE:"collapse",COMPANION:"companion"},m=document.getElementsByClassName("vast-contentroll"),k=new IntersectionObserver(function(a){[].forEach.call(a,function(a){"undefined"!==typeof a.isIntersecting&&!1===a.isIntersecting?(a=a.target,b(a,c.STARTED)&&(a.adsManager.pause(),e(a,"pauseAd"))):(a=a.target,b(a,c.STARTED)?(a.adsManager.resume(),e(a,"resumeAd")):b(a,c.LOADING)?e(a,"yet loading"):(e(a,"load"),a.adsRequest.adTagUrl=f(a,"vast"),a.adsLoader.requestAds(a.adsRequest),b(a,c.LOADING,
    1)))})},{threshold:0});[].forEach.call(m,function(a){b(a,c.INIT)||(k.observe(a),a.adDisplayContainer=new google.ima.AdDisplayContainer(a),a.adDisplayContainer.initialize(),a.adsLoader=new google.ima.AdsLoader(a.adDisplayContainer),a.adsRequest=new google.ima.AdsRequest,a.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(d){a.adsManager=d.getAdsManager(document.createElement("video"));a.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,function(e){b(a,
    c.LOADED,1)});a.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,function(d){b(a,c.STARTED,1);g(a);if(b(a,c.COMPANION)){e(a,"get a list of companion ads");d=d.getAd();var f=new google.ima.CompanionAdSelectionSettings;f.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC;f.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.IMAGE;f.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;a.companionAds=d.getCompanionAds(a.clientWidth,a.clientHeight,
    f);e(a,"getted companion ads count: "+a.companionAds.length)}});a.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(b){h(a,b)});try{a.adsManager.init(a.clientWidth,a.clientHeight,google.ima.ViewMode.NORMAL),a.adsManager.start()}catch(l){e(a,"error or empty ad",l)}},!1),a.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(b){e(a,"error or empty ad",b.getError());"undefined"!==typeof a.adsManager&&a.adsManager.destroy();h(a)},!1),b(a,c.INIT,1),b(a,
    c.LOADED,0),b(a,c.STARTED,0),e(a,"init"))})};document.head.appendChild(g)})();
